piVersion: batch/v1
kind: Job
metadata:
  name: ffmpeg-job
  namespace: ffmpeg
spec:
  template:
    spec:
      containers:
      - name: ffmpeg-container
        image: linuxserver/ffmpeg
        command: ["ffmpeg"]
        args:
        - "-re"  # Real-time streaming mode
        - "-stream_loop"
        - "-1"  # Loop the video indefinitely
        - "-i"
        - "https://ent.box.com/shared/static/pnsp2zeix9tsvgi0u663i8kmmdypkx63.mp4"  # Replace with the actual URL of the external video stream
        - "-f"
        - "rtsp"
        - "rtsp://192.168.0.240:8554/live/stream"  # This sends the stream to MediaMTX (mediatx) on port 8554
      restartPolicy: Never
  backoffLimit: 4  